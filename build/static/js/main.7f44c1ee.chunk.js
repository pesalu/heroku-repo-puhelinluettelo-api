(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(13),o=t.n(u),c=t(14),l=t(2),i=t(3),s=t.n(i),m="/api/persons",f=function(){return s.a.get(m).then((function(e){return e.data}))},d=f,h=function(e){return s.a.post(m,e).then((function(e){return e.data}))},p=function(e){return s.a.delete(m+"/"+e).then((function(e){return e.data}))},b=function(e,n){return s.a.put(m+"/"+e,n).then((function(e){return e.data}))};t(37);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var g=function(e){var n=e.message,t=e.style;return null===n||"something happened..."===n?null:(null===t&&(t="message"),a.a.createElement("div",{className:t},n))},O=function(e){var n=e.searchTextChangeHandler,t=e.newSearchQuery;return a.a.createElement("div",null,"Filter: ",a.a.createElement("input",{value:t,onChange:n}))},E=function(e){var n=e.persons,t=e.removePerson;return n.map((function(e){return a.a.createElement(j,{key:e.id,name:e.name,phone:e.number,removePerson:function(){return t(e.id)}})}))},j=function(e){var n=e.name,t=e.phone,r=e.removePerson;return a.a.createElement("div",null,n," ",t," ",a.a.createElement("button",{onClick:r},"Poista"))},P=function(e){var n=e.submissionHandler,t=e.handleNameChange,r=e.handlePhoneNumberChanges,u=e.newName,o=e.newPhoneNumber;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:u,onChange:t})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:o,onChange:r})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},w=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],o=Object(r.useState)(""),i=Object(l.a)(o,2),s=i[0],m=i[1],f=Object(r.useState)(""),j=Object(l.a)(f,2),w=j[0],y=j[1],C=Object(r.useState)(""),S=Object(l.a)(C,2),N=S[0],k=S[1],T=Object(r.useState)(null),H=Object(l.a)(T,2),D=H[0],x=H[1],J=Object(r.useState)(null),L=Object(l.a)(J,2),Q=L[0],A=L[1];Object(r.useEffect)((function(){d().then((function(e){return u(e)}))}),[]);return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(g,{message:D,style:"error-message"}),a.a.createElement(g,{message:Q,style:"message"}),a.a.createElement("h2",null,"Search by name or number"),a.a.createElement(O,{searchTextChangeHandler:function(e){return k(e.target.value)},newSearchQuery:N}),a.a.createElement("h2",null,"Add new person"),a.a.createElement(P,{submissionHandler:function(e){e.preventDefault();var n={name:s,number:w},r=t.find((function(e){return e.name===s}));r?window.confirm("Haluatko muuttaa puhelinnumeron?")&&b(r.id,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(t,!0).forEach((function(n){Object(c.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},r,{number:w})).then((function(e){u(t.map((function(n){return n.id!==e.id?n:e}))),m(""),y(""),A("Person updated!"),setTimeout((function(){return A(null)}),5e3)})).catch((function(e){x("Updating person "+n.name+" failed. Person is already removed."),setTimeout((function(){return x(null)}),5e3)})):h(n).then((function(e){u(t.concat(e)),m(""),y(""),A("Person added!"),setTimeout((function(){return A(null)}),5e3)})).catch((function(e){x(e.response.data),setTimeout((function(){return x(null)}),5e3)}))},handleNameChange:function(e){return m(e.target.value)},handlePhoneNumberChanges:function(e){return y(e.target.value)},newName:s,newPhoneNumber:w}),a.a.createElement("h2",null,"Persons"),a.a.createElement(E,{persons:function(e){return N?e.filter((function(e){return e.name.toLowerCase().includes(N)||e.number.toLowerCase().includes(N)})):e}(t),removePerson:function(e){window.confirm("Haluatko varmasti poistaa?")&&p(e).then((function(n){u(t.filter((function(n){return n.id!==e}))),A("Person removed!"),setTimeout((function(){return A(null)}),5e3)}))}}))};o.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7f44c1ee.chunk.js.map